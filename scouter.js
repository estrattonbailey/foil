function r(r){return r&&"object"==typeof r&&"default"in r?r.default:r}var t=r(require("nanoassert"));function e(r){var t=r.split("/");return t.slice(""!==t[0]?0:1)}function n(r,t){var n=e(r),o={};r:for(var a=0,u=t;a<u.length;a+=1){var p=u[a];if(n.length===p.parts.length){for(var s=0;s<p.parts.length;s++)if(":"!==p.parts[s][0]){if(p.parts[s]!==n[s]){if("*"===p.parts[s])break;continue r}}else o[p.parts[s].slice(1)]=n[s];return p.params=o,p}if("*"==p.parts[0])return p.params=o,p}}function o(r,t){return[r,t].join("/").replace("//","/")}function a(r){return t(r.path&&r.component,"routes require both path and component properties"),t("string"==typeof r.path,"route.path should be a string"),t("function"==typeof r.component,"route.component should be a function"),function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return r.routes=t&&t.length>0?function t(e){return e.map(function(e){if(e.path=o(r.path,e.path),e.loader&&r.loader){var n=e.loader;e.loader=function(t,e){return Promise.resolve(r.loader(t,e)).then(function(r){return n(r,e)})}}return t(r.routes||[]),e})}(t):[],r}}function u(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];var o=[];return function r(t){for(;t.length;){var n=t.pop();o.push({parts:e(n.path),component:n.component,loader:n.loader}),r(n.routes)}}(r),{resolve:function(r,t){var e=this;return Promise.resolve(n(r,o)).then(function(n){var o=n.component,a=n.loader,u=n.params,p=Object.assign(t||{},{params:u});return"function"==typeof a?(e.cache?e.cache.load(r,Promise.resolve(a(null,p))):Promise.resolve(a(null,p))).then(function(r){return{component:o,data:r,params:u}}):{component:o,data:{},params:u}})}}}exports.route=a,exports.router=u;
//# sourceMappingURL=scouter.js.map
